<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width">

    <title>Creation flight</title>
    <script src="http://s.codepen.io/assets/libs/modernizr.js" type="text/javascript"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700|Roboto+Slab:400,700">
    <link rel="stylesheet" href="css/normalize.css">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

  </head>
  <body background="images/MainImage.png" >

    <div class="container-fluid">
	<div class="row">
		<div class="col-md-3">
			<!-- <img alt="image background" src="https://a0.muscache.com/ic/discover/180?interpolation=lanczos-none&amp;output-format=jpg&amp;output-quality=70&amp;v=33b4f2&amp;downsize=655px:326px" /> -->
		</div>
		<div class="col-md-12">
			<nav class="navbar navbar-default" role="navigation">
				<div class="navbar-header">
					 
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
						 <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
					</button> <a class="navbar-brand" href="#">Home</a>
				</div>
				
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li class="active">
							<a href="#">List Flights</a>
						</li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li>
							<a class="navbar-brand" href="#">Logout</a>
						</li>
					</ul>
				</div>
				
			</nav>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-3">
				</div>
				<div class="col-md-6">
					
				</div>
				<div class="col-md-3">
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-2">
		</div>
		<div class="col-md-8">
			<section>
				<header>
				  <h1>CREATION FLIGHT</h1>
				</header>
		    <div class="arrow-up"></div>
				<form id="contact" class="form-horizontal" role="form">
					<div class="form-group">
						<div class="col-sm-12">
							<!-- <div class="form-row">
							<input type="text" class="form-control form-textbox" id="num" required>
							<label for="num" class="col-sm- control-label form-label">
								Commercial Number
							</label>
							</div> -->

							<input type="text" class="form-control" id="num" placeholder="COMMERCIAL NUMBER">
							
						</div>
					</div>
					<div class="form-group">	
						<div class="col-sm-12">
							<!-- <div class="form-row">
							<input type="text" class="form-control form-textbox" id="atc" required>
							<label for="atc" class="col-sm- control-label form-label">
								ATC
							</label>
							</div> -->

							<input type="text" class="form-control" id="atc" placeholder="ATC">
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
							<input type="text" class="form-control" id="dep_aprt_code" placeholder="DEPARTURE AIRPORT CODE">
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
							<input type="text" class="form-control" id="arr_arpt_code" placeholder="ARRIVAL AIRPORT CODE">
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
							<input type="text" class="form-control" id="dep_date" placeholder="DEPARTURE DATE">
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
							<input type="text" class="form-control" id="dep_time" placeholder="DEPARTURE TIME">
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
							<input type="text" class="form-control" id="arr_date" placeholder="ARRIVAL DATE">
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-12">
							<input type="text" class="form-control" id="arr_time" placeholder="ARRIVAL TIME">
						</div>
					</div>
					<button type="submit" class="btn btn-block" id="buttonAddFlight">Add Flight</button>
				</form> 
		</div>
	</section>
		<div class="col-md-2">
		</div>

		<!-- <div class="col-sm-offset-5 col-sm-10">		 
		<button type="submit" class="btn btn-primary" id="buttonAddFlight">
			Add flight
		</button>
		</div> -->



		<!-- 
		<div class="col-sm-offset-2 col-sm-10">		 
		<button type="submit" class="btn btn-primary" id="buttonGetFlight">
			GetFlight
		</button></div>
		-->


		
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="row">
				<div class="col-md-3">
					 
				
				</div>
				
				<div class="col-md-3">
					
				</div>
				<div class="col-md-3">
					
				</div>
			</div>
		</div>
	</div>
</div>
	<script src='http://cdnjs.cloudflare.com/ajax/libs/autosize.js/1.18.17/jquery.autosize.min.js'></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.0/js/materialize.min.js'></script>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
	<script src="js/index.js"></script>
	<script type="text/javascript">
		$( document ).ready(function() {
	    console.log( "ready!" );

	    // Getting information of the flight
	    var elt_com_num = document.getElementById("num");
	    var elt_atc = document.getElementById("atc");
	    var elt_dep_aprt_code = document.getElementById("dep_aprt_code");
	    var elt_arr_aprt_code = document.getElementById("arr_arpt_code");
	    var elt_dep_date = document.getElementById("dep_date");
	    var elt_dep_time = document.getElementById("dep_time");
	 	var elt_arr_date = document.getElementById("arr_date");
	 	var elt_arr_time = document.getElementById("arr_time");


	 	// Button "Add flight"   
	 	var btn_addFlight = document.getElementById("buttonAddFlight");
	 	var btn_getFlight = document.getElementById("buttonGetFlight");		
	 	 
	 	

	 	// GET --------------------------------------------------------
		btn_getFlight.addEventListener("click", function(){
			getFlight();
		});



		function getFlight(){
			 $.ajax({ 
		        type: 'GET', 
		        url: "ws/cco/flight/modify-flight" + "?id=1", 
		        data: { get_param: 'value' }, 
		        success: function (data) { 
		            console.log(data);
		        }
		    });
		}
		// GET --------------------------------------------------------


		// PUT --------------------------------------------------------
		btn_addFlight.addEventListener("click", function(){
	 		checkFields();
		});



	 	// Verifies wether we have all necessary info of the flight
	    function checkFields(){

	    	if(elt_com_num.value == '' || elt_atc.value == '' || elt_dep_aprt_code.value == ''|| elt_arr_aprt_code.value == '' || elt_dep_date.value == '' || elt_dep_time.value == '' || elt_arr_date.value == '' || elt_arr_time.value == ''){

	    		console.log("verifier les champs");
	    	}else{
	    		console.log("je suis la");
	    		createFlight()
	    	}

	    }


	    function createFlight(){


			var Flight = new Object();
        	Flight.commercial_number = elt_com_num.value;
        	Flight.atc_number = elt_atc.value;
        	Flight.departure_airport = elt_dep_aprt_code.value;
        	Flight.arrival_airport = elt_arr_aprt_code.value;
        	Flight.departure_date = elt_dep_date.value;
        	Flight.arrival_date = elt_arr_date.value;
        	Flight.departure_time = elt_dep_time.value + " GMT";
        	Flight.arrival_time = elt_arr_time.value+ " GMT";


	    		
			$.ajax({
			 	url: "../../ws/cco/flight/create-flight"+ "?userId=1",
			 	type: 'PUT',
			 	contentType: "application/json",
			 	dataType: "json",
            	data: JSON.stringify(Flight)
			}).done(function( msg ) {
			  	console.log("ok");
			  	window.location.replace("../FlightList/flightList.html");
			  });
		}
		// GET --------------------------------------------------------








































		});


	</script>
  </body>
</html>